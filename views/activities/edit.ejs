<%- include('../partials/header.ejs') %>
  <div class="container mt-5">
    <h1 class="mb-4">แก้ไขกิจกรรม</h1>
    <form action="/activities/edit/<%= activity.act_id %>" method="POST">
      <div class="mb-3">
        <label class="form-label">วันที่:</label>
        <% function formatThaiDate(dateStr) {
             const months = [
               "มกราคม", "กุมภาพันธ์", "มีนาคม", "เมษายน", "พฤษภาคม", "มิถุนายน",
               "กรกฎาคม", "สิงหาคม", "กันยายน", "ตุลาคม", "พฤศจิกายน", "ธันวาคม"
             ];
             const d = new Date(dateStr);
             if (isNaN(d)) return dateStr;
             return `${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear() + 543}`;
           }
        %>
        <input type="text" class="form-control" value="<%= formatThaiDate(activity.date_act) %>" readonly>
        <input type="hidden" name="date_act" value="<%= activity.date_act %>">
      </div>
      <div class="mb-3">
        <label class="form-label">เวลา:</label>
        <input type="time" name="act_time" class="form-control" value="<%= activity.act_time %>" required>
      </div>
      <div class="mb-3">
        <label class="form-label">กิจกรรม:</label>
        <textarea name="activity" class="form-control" required><%= activity.activity %></textarea>
      </div>
      <div class="mb-3">
        <label class="form-label">สถานที่:</label>
        <input type="text" name="place" class="form-control" value="<%= activity.place %>" required>
      </div>
      <div class="mb-3">
        <label class="form-label">ผู้รับผิดชอบ:</label>
        <input type="text" name="co_person" class="form-control" value="<%= activity.co_person %>" required>
      </div>
      <div class="mb-3">
        <label class="form-label">ความคิดเห็น:</label>
        <textarea name="comment" class="form-control"><%= activity.comment %></textarea>
      </div>
      <div class="mb-3">
        <input type="hidden" name="saveby" value="<%= activity.saveby %>">
      </div>
      <div class="mb-3">
        <input type="hidden" name="savedate" id="savedate" value="<%= activity.savedate %>">
      </div>
      <button type="submit" class="btn btn-success">บันทึกการแก้ไข</button>
      <a href="/activities" class="btn btn-secondary">ยกเลิก</a>
    </form>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
 
<%- include('../partials/footer.ejs') %>
