<%- include('../partials/header') %>

<h2>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Active Coop</h2>

<form method="GET" class="mb-3 row g-2 align-items-center">
  <div class="col-md-3">
    <input type="text" name="search" class="form-control" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..." value="<%= search %>">
  </div>

  <div class="col-md-3">
    <select name="group" class="form-select">
      <option value="all" <%= group === 'all' ? 'selected' : '' %>>-- ‡∏ó‡∏∏‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏° --</option>
      <option value="group1" <%= group === 'group1' ? 'selected' : '' %>>group1</option>
      <option value="group2" <%= group === 'group2' ? 'selected' : '' %>>group2</option>
      <option value="group3" <%= group === 'group3' ? 'selected' : '' %>>group3</option>
      <option value="group4" <%= group === 'group4' ? 'selected' : '' %>>group4</option>
      <option value="group5" <%= group === 'group5' ? 'selected' : '' %>>group5</option>
    </select>
  </div>

  <div class="col-md-3">
    <select name="status" class="form-select">
      <option value="all" <%= status === 'all' ? 'selected' : '' %>>-- ‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ --</option>
      <option value="‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£" <%= status === '‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£' ? 'selected' : '' %>>‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
      <option value="‡πÄ‡∏•‡∏¥‡∏Å" <%= status === '‡πÄ‡∏•‡∏¥‡∏Å' ? 'selected' : '' %>>‡πÄ‡∏•‡∏¥‡∏Å/‡∏ä‡∏≥‡∏£‡∏∞‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</option>
      <option value="‡∏ñ‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠" <%= status === '‡∏ñ‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠' ? 'selected' : '' %>>‡∏ñ‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠</option>
    </select>
  </div>

  <div class="col-md-2">
    <button class="btn btn-primary w-100">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
  </div>
</form>

<a href="/active-coop/create" class="btn btn-success mb-3">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a>

<table class="table table-bordered table-striped">
  <thead>
    <tr>
    
      <th>‡∏£‡∏´‡∏±‡∏™</th>
      <th>‡∏ä‡∏∑‡πà‡∏≠</th>
      <th>‡πÄ‡∏•‡∏Ç‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</th>
      <th>‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</th>
      <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
      <th>‡∏Å‡∏•‡∏∏‡πà‡∏°</th>
      <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
    </tr>
  </thead>
  <tbody>
    <% if (coops.length > 0) { %>
      <% coops.forEach(c => { %>
        <tr>
        
          <td><%= c.c_code %></td>
          <td><%= c.c_name %></td>
          <td><%= c.c_no %></td>
          <td><%= c.end_date %></td>
          <td><%= c.c_status %></td>
          <td><%= c.c_group %></td>
          <td>
            <a href="/activeCoop/edit/<%= c.c_id %>" class="btn btn-warning btn-sm">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</a>
            <a href="/activeCoop/delete/<%= c.c_id %>" class="btn btn-danger btn-sm" onclick="return confirm('‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ?')">‡∏•‡∏ö</a>
          </td>
        </tr>
      <% }) %>
    <% } else { %>
      <tr>
        <td colspan="8" class="text-center">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</td>
      </tr>
    <% } %>
  </tbody>
</table>

<nav>
  <ul class="pagination">
    <% for (let i = 1; i <= totalPages; i++) { %>
      <li class="page-item <%= page === i ? 'active' : '' %>">
        <a class="page-link" href="?page=<%= i %>&search=<%= search %>&group=<%= group %>&status=<%= status %>"><%= i %></a>
      </li>
    <% } %>
  </ul>
</nav>

<%- include('../partials/footer') %>