<%- include('partials/header.ejs') %>

  <!-- Modern Dashboard -->
  <div class="container-fluid py-4"
    style="background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); min-height: 100vh;">
    <div class="container">
      <!-- Welcome Section -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card border-0 shadow-lg" style="background: rgba(255,255,255,0.95); backdrop-filter: blur(10px);">
            <div class="card-body p-4">
              <div class="row align-items-center">
                <div class="col-md-8">
                  <h1 class="display-5 fw-bold text-primary mb-2">
                    <i class="bi bi-speedometer2 me-3"></i>แดชบอร์ด
                  </h1>
                  <p class="text-muted mt-2">แดชบอร์ดสำหรับการเข้าถึงฟีเจอร์ต่างๆ ได้อย่างสะดวก</p>
                  <% if (user && (user.mClass === 'kts' || user.mClass === 'admin')) { %>
                    <!-- admin panel -->
                  
                  <a href="/account/list" class="btn btn-success mt-3">
                    <i class="bi bi-plus-circle"></i> บัญชี กจส
                  </a>
                  <% } %>
                </div>
                <div class="col-md-4 text-center">
                  <img src="<%= user.m_img %>" alt="Profile"
                    class="rounded-circle shadow-lg border border-4 border-white"
                    style="width: 120px; height: 120px; object-fit: cover;" />
                    <h4 class="text-success mb-0 mt-2"><%= user.fullname %></h4>
                    <p class="text-muted mb-0"><%= user.position %></p>
                    <% if (user && user.mClass === 'kjs') { %>
                      <a href="/account/list" class="btn btn-primary mt-3">
                         <i class="bi bi-wallet2"></i> เงินกลุ่ม กจส
                      </a>
                    <% } %>
                    <div class="div">
                      <a href="/auth/logout" class="btn btn-danger mt-3">
                        <i class="bi bi-box-arrow-right"></i> ออกจากระบบ
                      </a>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Stats Cards -->
      <div class="row mb-4">
        <div class="col-md-3 mb-3">
          <a href="/project" class="text-decoration-none">
          <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(45deg, #FF6B6B, #FF8E8E);">
            <div class="card-body text-white text-center">
              <i class="bi bi-file-earmark-text display-4 mb-3"></i>
              <h5>โครงการ</h5>
              <p class="mb-0">กิจกรรมต่างๆ</p>
            </div>
          </div>
          </a>
        </div>
        <div class="col-md-3 mb-3">
          <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(45deg, #4ECDC4, #44A08D);">
            <div class="card-body text-white text-center">
              <i class="bi bi-book display-4 mb-3"></i>
              <h5>คำสั่งสำนักงาน</h5>
              <p class="mb-0">คำสั่งต่างๆ</p>
            </div>
          </div>
        </div>
        <div class="col-md-3 mb-3">
          <a href="/rq2" class="text-decoration-none">
          <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(45deg, #45B7D1, #96C93D);">
            <div class="card-body text-white text-center">
              <i class="bi bi-graph-up display-4 mb-3"></i>
              <h5>รายงาน RQ2</h5>
              <p class="mb-0">สำนักงานตรวจบัญชี</p>
            </div>
          </div>
          </a>
        </div>
        <div class="col-md-3 mb-3">
          <a href="<%= user.mClass === 'admin' ? '/activeCoop/' : '#' %>" class="text-decoration-none">
            <div class="card border-0 shadow-sm h-100" style="background: linear-gradient(45deg, #F093FB, #F5576C);">
              <div class="card-body text-white text-center">
                <i class="bi bi-gear display-4 mb-3"></i>
                <h5>ตั้งค่า</h5>
                <p class="mb-0">ระบบอื่นๆ</p>
              </div>
            </div>
          </a>
        </div>
      </div>

      <!-- Main Navigation -->
      <div class="row">
        <div class="col-12">
          <div class="card border-0 shadow-lg">
            <div class="card-header bg-white border-0 py-4">
              <h4 class="mb-0 text-center">
                <i class="bi bi-grid-3x3-gap me-2"></i>ข้อมูลทั้งหมด
              </h4>
            </div>
            <div class="card-body p-4">
              <div class="row g-4">
                <!-- รายงานงบการเงิน-->
                <div class="col-lg-6">
                  <a href="/finance/" class="text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 hover-card">
                      <div class="card-body p-4">
                        <div class="d-flex align-items-center">
                          <div class="flex-shrink-0">
                            <div class="bg-primary bg-gradient rounded-circle p-3">
                              <i class="bi bi-file-earmark-bar-graph text-white fs-3"></i>
                            </div>
                          </div>
                          <div class="flex-grow-1 ms-4">
                            <h5 class="card-title text-primary mb-2">รายงานงบการเงิน</h5>
                            <p class="card-text text-muted mb-0">
                              สหกรณ์/กลุ่มเกษตรกร
                            </p>
                          </div>
                          <div class="flex-shrink-0">
                            <i class="bi bi-arrow-right-circle text-primary fs-4"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                </div>

                <!-- ข้อบังคับ-->
                <div class="col-lg-6">
                  <a href="/rule" class="text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 hover-card">
                      <div class="card-body p-4">
                        <div class="d-flex align-items-center">
                          <div class="flex-shrink-0">
                            <div class="bg-success bg-gradient rounded-circle p-3">
                              <i class="bi bi-journal-text text-white fs-3"></i>
                            </div>
                          </div>
                          <div class="flex-grow-1 ms-4">
                            <h5 class="card-title text-success mb-2">ข้อบังคับ</h5>
                            <p class="card-text text-muted mb-0">
                              สหกรณ์/กลุ่มเกษตรกร
                            </p>
                          </div>
                          <div class="flex-shrink-0">
                            <i class="bi bi-arrow-right-circle text-success fs-4"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                </div>

                <!-- รายงานกิจการ -->
                <div class="col-lg-6">
                  <a href="/business" class="text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 hover-card">
                      <div class="card-body p-4">
                        <div class="d-flex align-items-center">
                          <div class="flex-shrink-0">
                            <div class="bg-info bg-gradient rounded-circle p-3">
                              <i class="bi bi-people text-white fs-3"></i>
                            </div>
                          </div>
                          <div class="flex-grow-1 ms-4">
                            <h5 class="card-title text-info mb-2">รายงานกิจการ</h5>
                            <p class="card-text text-muted mb-0">
                              สหกรณ์/กลุ่มเกษตรกร
                            </p>
                          </div>
                          <div class="flex-shrink-0">
                            <i class="bi bi-arrow-right-circle text-info fs-4"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                </div>
                <!-- ระเบียบ -->
                <div class="col-lg-6">
                  <a href="/rabiab" class="text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 hover-card">
                      <div class="card-body p-4">
                        <div class="d-flex align-items-center">
                          <div class="flex-shrink-0">
                            <div class="bg-warning bg-gradient rounded-circle p-3">
                              <i class="bi bi-bar-chart text-white fs-3"></i>
                            </div>
                          </div>
                          <div class="flex-grow-1 ms-4">
                            <h5 class="card-title text-warning mb-2">ระเบียบ</h5>
                            <p class="card-text text-muted mb-0">
                              สหกรณ์/กลุ่มเกษตรกร
                            </p>
                          </div>
                          <div class="flex-shrink-0">
                            <i class="bi bi-arrow-right-circle text-warning fs-4"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                </div>
                <!-- ข้อมูลใช้รถยนต์ -->
                <div class="col-lg-6">
                  <a href="/usecar" class="text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 hover-card">
                      <div class="card-body p-4">
                        <div class="d-flex align-items-center">
                          <div class="flex-shrink-0">
                            <div class="bg-dark bg-gradient rounded-circle p-3">
                              <i class="bi bi-database text-white fs-3"></i>
                            </div>
                          </div>
                          <div class="flex-grow-1 ms-4">
                            <h5 class="card-title text-dark mb-2">การขอใช้รถยนต์</h5>
                            <p class="card-text text-muted mb-0">
                              ข้อมูลและรายงาน
                            </p>
                          </div>
                          <div class="flex-shrink-0">
                            <i class="bi bi-arrow-right-circle text-dark fs-4"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                </div>
                <!-- วงกู้ยืม/ค้ำประกัน -->
                 <div class="col-lg-6">
                  <a href="/vong" class="text-decoration-none">
                    <div class="card border-0 shadow-sm h-100 hover-card">
                      <div class="card-body p-4">
                        <div class="d-flex align-items-center">
                          <div class="flex-shrink-0">
                            <div class="bg-danger bg-gradient rounded-circle p-3">
                              <i class="bi bi-cash-coin text-white fs-3"></i>
                            </div>
                          </div>
                          <div class="flex-grow-1 ms-4">
                            <h5 class="card-title text-danger mb-2">วงกู้ยืม/ค้ำประกัน</h5>
                            <p class="card-text text-muted mb-0">
                              วงกู้ยืม/ค้ำประกันของสหกรณ์/กลุ่มเกษตรกร
                            </p>
                          </div>
                          <div class="flex-shrink-0">
                            <i class="bi bi-arrow-right-circle text-danger fs-4"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                 </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Last 5 Gitgum events -->
    <div class="row mt-4">
      <div class="col-12">
        <div class="card border-0 shadow-sm">
          <div class="card-header bg-white border-0">
            <h5 class="mb-0"><i class="bi bi-calendar-event me-2"></i> กิจกรรมล่าสุด (5 รายการ)</h5>
          </div>
          <div class="card-body">
            <ul class="list-group list-group-flush">
              <% (lastGitgums || []).forEach((g) => { %>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                  <span>
                    <strong><%= new Date(g.git_date).toLocaleDateString('th-TH', { year: 'numeric', month: 'long', day: 'numeric' }) %></strong>
                    <span class="text-muted ms-2"><i class="bi bi-clock"></i> <%= g.git_time + ' น.' %></span>
                    — <%= g.git_act %> @ <%= g.git_place %>
                  </span>
                  <a href="/gitgum/list" class="btn btn-sm btn-outline-primary">ทั้งหมด</a>
                </li>
              <% }) %>
              <% if (!lastGitgums || lastGitgums.length === 0) { %>
                <li class="list-group-item text-muted">ไม่มีรายการ</li>
              <% } %>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Custom CSS -->
  <style>
    .hover-card {
      transition: all 0.3s ease;
    }

    .hover-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15) !important;
    }

    .card {
      border-radius: 15px;
    }

    .bg-gradient {
      background: linear-gradient(45deg, var(--bs-primary), var(--bs-primary-dark)) !important;
    }
  </style>

  <%- include('partials/footer') %>