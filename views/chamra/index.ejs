<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå (Chamra Detail)</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <h1>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå / ‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÄ‡∏Å‡∏©‡∏ï‡∏£‡∏Å‡∏£</h1>

  <form method="GET" action="/chamra">
    <input type="text" name="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå" value="<%= search %>">
    <select name="c_status">
      <option value="">-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ --</option>
      <option value="‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£" <%= c_status === '‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£' ? 'selected' : '' %>>‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
      <option value="‡πÄ‡∏•‡∏¥‡∏Å" <%= c_status === '‡πÄ‡∏•‡∏¥‡∏Å' ? 'selected' : '' %>>‡πÄ‡∏•‡∏¥‡∏Å</option>
      <option value="‡∏ñ‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠" <%= c_status === '‡∏ñ‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠' ? 'selected' : '' %>>‡∏ñ‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠</option>
    </select>
    <select name="gr_step">
      <option value="">-- ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô --</option>
      <% for (let i = 0; i <= 6; i++) { %>
        <option value="<%= i %>" <%= gr_step == i ? 'selected' : '' %>>‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô <%= i %></option>
      <% } %>
    </select>
    <button type="submit">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
  </form>

  <table border="1" cellpadding="6" cellspacing="0">
    <thead>
      <tr>
        <th>‡∏£‡∏´‡∏±‡∏™</th>
        <th>‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå</th>
        <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
        <th>‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö</th>
        <th>‡∏°‡∏≤‡∏ï‡∏£‡∏≤</th>
        <th>‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</th>
        <th>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
      </tr>
    </thead>
    <tbody>
      <% if (data.length === 0) { %>
        <tr><td colspan="7">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</td></tr>
      <% } else { %>
        <% data.forEach(item => { %>
          <tr>
            <td><%= item.de_code %></td>
            <td><%= item.c_name %></td>
            <td><%= item.c_status %></td>
            <td><%= item.c_person %></td>
            <td><%= item.de_case %></td>
            <td><%= item.de_target1 %> / <%= item.de_target2 %></td>
            <td>
              <a href="/chamra/<%= item.de_code %>/view">‡∏î‡∏π</a> |
              <a href="/chamra/<%= item.de_code %>/edit">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</a> |
              <form method="POST" action="/chamra/<%= item.de_code %>?_method=DELETE" style="display:inline;">
                <button type="submit" onclick="return confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö?')">‡∏•‡∏ö</button>
              </form>
            </td>
          </tr>
        <% }) %>
      <% } %>
    </tbody>
  </table>

  <div class="pagination">
    <% for (let i = 1; i <= Math.ceil(pagination.total_records / pagination.page_size); i++) { %>
      <a href="?search=<%= search %>&c_status=<%= c_status %>&gr_step=<%= gr_step %>&page=<%= i %>&page_size=<%= pagination.page_size %>"
         class="<%= i === pagination.page ? 'active' : '' %>">
        ‡∏´‡∏ô‡πâ‡∏≤ <%= i %>
      </a>
    <% } %>
  </div>
</body>
</html>
