<%- include('partials/header') %>

<div class="container-fluid px-2 px-md-4">
  <div class="row align-items-center justify-content-between my-4">
    <div class="col-auto">
      <h2 class="m-0">üìÜ ‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h2>
    </div>
    <div class="col-auto">
      <% if (user) { %>
        <a href="/gitgum/add" class="btn btn-success me-2"><i class="bi bi-plus-circle"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</a>
      <% } %>
      <a href="/gitgum/mobile" class="btn btn-primary" target="_blank"><i class="bi bi-phone"></i> ‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠</a>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-12">
      <div class="card bg-light border-0">
        <div class="card-body">
          <p class="card-text mb-3">
            <i class="bi bi-info-circle text-info me-2"></i>
            <strong>‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠:</strong> ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö Standalone ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Shortcut ‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
            <br/>
            <small class="text-muted ms-4">‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠" ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏´‡∏£‡∏∑‡∏≠ ‡∏™‡πÅ‡∏Å‡∏ô QR code ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</small>
          </p>
          <div class="text-center">
            <a href="/gitgum/mobile" class="btn btn-outline-primary btn-lg">
              <i class="bi bi-arrow-up-right"></i> ‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="calendar" style="min-height: 600px;"></div>
</div>

<!-- FullCalendar CSS -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/locales-all.global.min.js"></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const calendarEl = document.getElementById('calendar');
    const events = <%- JSON.stringify(events || []) %>;

    const calendar = new FullCalendar.Calendar(calendarEl, {
      locale: 'th',
      timeZone: 'Asia/Bangkok',
      initialView: 'dayGridMonth',
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,listWeek'
      },
      height: 'auto',
      nowIndicator: true,
      navLinks: true,
      dayMaxEvents: true,
      events,
      eventClick: function(info) {
        window.location.href = '/gitgum/view/' + info.event.id;
      }
    });
    calendar.render();
  });
</script>

<%- include('partials/footer') %>
