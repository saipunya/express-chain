<%- include('partials/header') %>

<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="mb-0">üëÅÔ∏è ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</h3>
    <div>
      <a href="/addmem/list" class="btn btn-secondary">
        <i class="bi bi-arrow-left"></i> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
      </a>
      <% if(user && user.mClass=='kjs'){ %>
        <a href="/addmem/edit/<%= record.addmem_id %>" class="btn btn-warning">
          <i class="bi bi-pencil"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
        </a>
      <% } %>
    </div>
  </div>

  <div class="row">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header text-white" style="background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);">
          <h5 class="mb-0">üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h5>
        </div>
        <div class="card-body">
          <div class="row mb-3">
            <div class="col-sm-4 fw-bold">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å:</div>
            <div class="col-sm-8">
              <span class="badge bg-primary fs-6"><%= record.addmem_code %></span>
            </div>
          </div>
          
          <div class="row mb-3">
            <div class="col-sm-4 fw-bold">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏´‡∏Å‡∏£‡∏ì‡πå:</div>
            <div class="col-sm-8">
              <%= record.c_name || '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•' %>
            </div>
          </div>
          
          <div class="row mb-3">
            <div class="col-sm-4 fw-bold">‡∏õ‡∏µ:</div>
            <div class="col-sm-8">
              <span class="badge bg-info fs-6"><%= record.addmem_year %></span>
            </div>
          </div>
          
          <div class="row mb-3">
            <div class="col-sm-4 fw-bold">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å:</div>
            <div class="col-sm-8">
              <span class="badge bg-success fs-6"><%= record.addmem_saman %> ‡∏Ñ‡∏ô</span>
            </div>
          </div>
          
          <div class="row mb-3">
            <div class="col-sm-4 fw-bold">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏ó‡∏ö:</div>
            <div class="col-sm-8">
              <span class="badge bg-warning fs-6"><%= record.addmem_somtob %> ‡∏Ñ‡∏ô</span>
            </div>
          </div>
          
          <hr>
          
          <div class="row mb-3">
            <div class="col-sm-4 fw-bold">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÇ‡∏î‡∏¢:</div>
            <div class="col-sm-8">
              <i class="bi bi-person"></i> <%= record.addmem_saveby %>
            </div>
          </div>
          
          <div class="row mb-3">
            <div class="col-sm-4 fw-bold">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å:</div>
            <div class="col-sm-8">
              <i class="bi bi-calendar"></i> 
              <%= new Date(record.addmem_savedate).toLocaleString('th-TH', { 
                day: 'numeric', 
                month: 'long', 
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
              }) %>
            </div>
          </div>
          
          <div class="row">
            <div class="col-sm-4 fw-bold">ID:</div>
            <div class="col-sm-8">
              <code class="text-muted">#<%= record.addmem_id %></code>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <!-- ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ -->
      <div class="card">
        <div class="card-header text-white" style="background: linear-gradient(135deg, #6c757d 0%, #495057 100%);">
          <h6 class="mb-0">üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</h6>
        </div>
        <div class="card-body text-center">
          <div class="mb-3">
            <h4 class="text-primary mb-1"><%= record.addmem_saman %></h4>
            <small class="text-muted">‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</small>
          </div>
          <div class="mb-3">
            <h4 class="text-success mb-1"><%= record.addmem_somtob %></h4>
            <small class="text-muted">‡∏™‡∏°‡∏ó‡∏ö</small>
          </div>
          <div>
            <h4 class="text-info mb-1"><%= parseInt(record.addmem_saman) + parseInt(record.addmem_somtob) %></h4>
            <small class="text-muted">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</small>
          </div>
        </div>
      </div>

      <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ -->
      <% if(user && user.mClass=='kjs'){ %>
      <div class="card mt-3">
        <div class="card-header text-white" style="background: linear-gradient(135deg, #dc3545 0%, #bd2130 100%);">
          <h6 class="mb-0">‚ö†Ô∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h6>
        </div>
        <div class="card-body">
          <div class="d-grid gap-2">
            <a href="/addmem/edit/<%= record.addmem_id %>" class="btn btn-warning">
              <i class="bi bi-pencil"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            </a>
            <a href="/addmem/delete/<%= record.addmem_id %>" class="btn btn-danger" 
               onclick="return confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ô‡∏µ‡πâ?\n‡∏£‡∏´‡∏±‡∏™: <%= record.addmem_code %>\n‡∏õ‡∏µ: <%= record.addmem_year %>\n\n‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡πÑ‡∏î‡πâ!')">
              <i class="bi bi-trash"></i> ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            </a>
          </div>
        </div>
      </div>
      <% } %>

      <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° -->
      <div class="card mt-3">
        <div class="card-header text-white" style="background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);">
          <h6 class="mb-0">‚ÑπÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</h6>
        </div>
        <div class="card-body">
          <small class="text-muted">
            <p class="mb-2"><strong>‡∏£‡∏´‡∏±‡∏™‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å:</strong> <%= record.addmem_code %></p>
            <p class="mb-2"><strong>‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì:</strong> <%= record.addmem_year %></p>
            <p class="mb-0"><strong>‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô:</strong> 
              <%= ((parseInt(record.addmem_somtob) / parseInt(record.addmem_saman)) * 100).toFixed(1) %>%
            </p>
          </small>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
